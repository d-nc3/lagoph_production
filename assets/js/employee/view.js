$(function(){let borderColor,bodyBg,headingColor;if(isDarkStyle){borderColor=config.colors_dark.borderColor;bodyBg=config.colors_dark.bodyBg;headingColor=config.colors_dark.headingColor}else{borderColor=config.colors.borderColor;bodyBg=config.colors.bodyBg;headingColor=config.colors.headingColor}
const select2=$('.select2');if(select2.length){select2.each(function(){const $this=$(this);$this.wrap('<div class="position-relative"></div>').select2({placeholder:'Select All',dropdownParent:$this.parent(),});$this.on('change',function(e){e.preventDefault()})})}
'use strict';const suspendUser=document.querySelector('.suspend-user');if(suspendUser){suspendUser.onclick=function(){Swal.fire({title:'Are you sure?',text:"You won't be able to revert user!",icon:'warning',showCancelButton:!0,confirmButtonText:'Yes, Suspend user!',customClass:{confirmButton:'btn btn-primary me-2',cancelButton:'btn btn-label-secondary'},buttonsStyling:!1}).then(function(result){if(result.value){Swal.fire({icon:'success',title:'Suspended!',text:'User has been suspended.',customClass:{confirmButton:'btn btn-success'}})}else if(result.dismiss===Swal.DismissReason.cancel){Swal.fire({title:'Cancelled',text:'Cancelled Suspension :)',icon:'error',customClass:{confirmButton:'btn btn-success'}})}})}}
function handleEditRows(){const editButtons=document.querySelectorAll('.edit-record');editButtons.forEach(d=>{d.addEventListener('click',function(e){e.preventDefault();const id=$(this).data('id');showBlockUI();$.ajax({url:`${BASE_URL}Employee/get`,type:"POST",async:!0,data:{id:id},dataType:'json',success:function(response){hideBlockUI();if(response){$('#edit-id').val(response.id);$('#edit-first-name').val(response.first_name);$('#edit-email').val(response.email);$('#edit-last-name').val(response.last_name);$('#edit-middle-name').val(response.middle_name);$('#edit-number').val(response.mobile_number);$('#edit-sex').val(response.sex).trigger('change');$('#edit-birth-place').val(response.birth_place).trigger('change');$('#edit-dob').val(response.date_of_birth);$('#edit-position-title').val(response.position_id).trigger('change');$('#edit-date-hired').val(response.date_hired);$('#edit-status').val(response.status).trigger('change')}else{Swal.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}},error:function(xhr){hideBlockUI();Swal.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}})})})}
handleEditRows();const form=document.getElementById('edit-form')
const fv=FormValidation.formValidation(form,{fields:{first_name:{validators:{notEmpty:{message:'First Name field is required'}}},last_name:{validators:{notEmpty:{message:'Last Name field is required'}}},middle_name:{validators:{notEmpty:{message:'Middle Name field is required'}}},date_of_birth:{validators:{notEmpty:{message:'Date of Birth field is required'}}},place_of_birth:{validators:{notEmpty:{message:'Place of Birth field is required'}}},mobile_number:{validators:{notEmpty:{message:'The mobile number field is required'},numeric:{message:'The input must be a number'},stringLength:{min:11,max:11,message:'The mobile number must be exactly 11 digits'}}},date_hired:{validators:{notEmpty:{message:'Date Hired field is required'}}},position_title:{validators:{notEmpty:{message:'Position field is required'}}},email:{validators:{notEmpty:{message:'Email field is required'},emailAddress:{message:'Input is not a valid email address'}}},employment_status:{validators:{notEmpty:{message:'Field is required'}}}},plugins:{trigger:new FormValidation.plugins.Trigger(),bootstrap5:new FormValidation.plugins.Bootstrap5({eleValidClass:'',}),autoFocus:new FormValidation.plugins.AutoFocus(),submitButton:new FormValidation.plugins.SubmitButton()},init:instance=>{instance.on('plugins.message.placed',function(e){if(e.element.parentElement.classList.contains('input-group')){e.element.parentElement.insertAdjacentElement('afterend',e.messageElement)}})}}).on('core.form.valid',function(){showBlockUI();$.ajax({url:`${BASE_URL}Employee/edit`,type:"POST",data:new FormData(form),contentType:!1,cache:!1,processData:!1,dataType:'json',success:function(response){hideBlockUI();if(response.status){Swal.fire({text:response.message,icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary",}}).then(()=>{offCanvassEdit.offcanvas("hide");dt.draw()})}else{if(Object.keys(response.validation_errors).length>0){let html='<div class="text-start">Please check the following fields:</br>';html+='<ol>';$.each(response.validation_errors,function(key,value){html+='<li><b>'+value.label+'</b> : '+value.message+'</li>'});html+='</ol></div>';Swal.fire({title:response.message,icon:'error',html:html,showCloseButton:!0,focusConfirm:!0,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary",},buttonsStyling:!1})}else{Swal.fire({text:response.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}}},error:function(xhr){hideBlockUI();Swal.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}})});setTimeout(()=>{$('.dataTables_filter .form-control').removeClass('form-control-sm');$('.dataTables_length .form-select').removeClass('form-select-sm')},300)})