'use strict';const form=document.querySelector('#formAuthentication');document.addEventListener('DOMContentLoaded',function(e){(function(){if(form){const fv=FormValidation.formValidation(form,{fields:{email:{validators:{notEmpty:{message:'Please enter your email'},emailAddress:{message:'Please enter valid email address'}}},password:{validators:{notEmpty:{message:'Please enter your password'}}},},plugins:{trigger:new FormValidation.plugins.Trigger(),bootstrap5:new FormValidation.plugins.Bootstrap5({eleValidClass:'',rowSelector:'.mb-3'}),autoFocus:new FormValidation.plugins.AutoFocus()},init:instance=>{instance.on('plugins.message.placed',function(e){if(e.element.parentElement.classList.contains('input-group')){e.element.parentElement.insertAdjacentElement('afterend',e.messageElement)}})}});form.addEventListener('submit',function(event){event.preventDefault();fv.validate().then(function(status){if(status==='Valid'){showBlockUI();$.ajax({url:`${BASE_URL}Auth`,type:"POST",async:!0,data:new FormData(form),contentType:!1,cache:!1,processData:!1,dataType:'json',success:function(response){hideBlockUI();if(response.status){Swal.fire({text:response.message,icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary",}}).then(()=>{window.location.href=BASE_URL+'Profile'})}else{if(Object.keys(response.validation_errors).length>0){let html='<div class="text-start">Please check the following fields:</br>';html+='<ol>';$.each(response.validation_errors,function(key,value){html+='<li><b>'+value.label+'</b> : '+value.message+'</li>'});html+='</ol></div>';Swal.fire({title:response.message,icon:'error',html:html,showCloseButton:!0,showCancelButton:!0,focusConfirm:!0,showCancelButton:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary",},buttonsStyling:!1})}else{Swal.fire({text:response.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}}},error:function(xhr){hideBlockUI();Swal.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}})}})})}})()})